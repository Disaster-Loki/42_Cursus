ğŸ³ Inception (Notas Completas)
1ï¸âƒ£ CONCEITOS
â“ O que Ã© Docker?
Docker Ã© uma plataforma para desenvolver, entregar e executar aplicaÃ§Ãµes em containers. Ele permite que a aplicaÃ§Ã£o seja isolada do sistema operacional, garantindo que funcione da mesma forma em qualquer ambiente (desenvolvimento, staging ou produÃ§Ã£o).

âš™ï¸ Conceitos Fundamentais
ğŸ“¦ 1. Container
Um ambiente leve, isolado e portÃ¡til para rodar sua aplicaÃ§Ã£o.

Compartilha o kernel do host.

Leve: usa menos recursos que VMs.

Isolado: tem seu prÃ³prio sistema de arquivos, rede e processos.

ReprodutÃ­vel: funciona igual em qualquer lugar.

ğŸ§± 2. Imagem
Modelo imutÃ¡vel para criar containers.

ContÃ©m:

Sistema de arquivos

Bibliotecas e dependÃªncias

CÃ³digo da aplicaÃ§Ã£o

Criadas a partir de um Dockerfile.

ğŸ“œ 3. Dockerfile
Arquivo de texto com instruÃ§Ãµes para criar uma imagem.

Exemplos de instruÃ§Ãµes:
FROM alpine
COPY . /app
RUN apk add --no-cache python3
CMD ["python3", "/app/main.py"]
â˜ï¸ 4. Docker Hub
RepositÃ³rio online de imagens Docker (pÃºblico ou privado).

VocÃª pode:

ğŸ”½ pull: baixar imagens existentes.

ğŸ”¼ push: enviar suas imagens personalizadas.

ğŸ”§ 5. Docker Engine
ServiÃ§o em segundo plano (dockerd) que gerencia imagens, containers, volumes, redes, etc.

2ï¸âƒ£ COMANDOS DOCKER
ğŸ” IMAGENS
AÃ§Ã£o	Comando
Ver imagens instaladas	docker images
Baixar imagem	docker pull nome:tag
Remover imagem	docker rmi nome
Criar imagem com Dockerfile	docker build -t nome-imagem .
Ver histÃ³rico da imagem	docker history nome-imagem
Ver detalhes da imagem	docker inspect nome-imagem
Ver todas camadas de imagens	docker image ls

ğŸ“¦ CONTAINERS
AÃ§Ã£o	Comando
Rodar container interativo	docker run -it nome-imagem
Rodar e apagar ao sair	docker run --rm nome-imagem comando
Rodar com nome	docker run --name meucontainer nome-imagem
Rodar em segundo plano	docker run -d nome-imagem
Ver containers ativos	docker ps
Ver todos (ativos e parados)	docker ps -a
Parar container	docker stop id_ou_nome
Iniciar container parado	docker start id_ou_nome
Reiniciar container	docker restart id_ou_nome
Remover container	docker rm id_ou_nome
Ver logs	docker logs id_ou_nome
Acessar container	docker exec -it nome bash
Detalhes do container	docker inspect nome

ğŸš€ PULL / PUSH de IMAGENS
AÃ§Ã£o	Comando
Baixar imagem	docker pull nome:tag
Enviar imagem para Docker Hub	docker push usuario/nome:tag
Fazer login no Docker Hub	docker login
Taguear imagem local	docker tag nome-local usuario/nome:tag

ğŸ—‚ï¸ VOLUMES (PersistÃªncia de dados)
AÃ§Ã£o	Comando
Criar volume	docker volume create nome
Listar volumes	docker volume ls
Ver detalhes	docker volume inspect nome
Remover volume	docker volume rm nome
Usar volume no container	docker run -v nome:/caminho container
Bind mount (diretÃ³rio local)	docker run -v $(pwd):/app container

ğŸŒ REDES (Entre containers)
AÃ§Ã£o	Comando
Criar rede	docker network create minha-rede
Listar redes	docker network ls
Conectar container	docker network connect minha-rede container
Desconectar container	docker network disconnect minha-rede container
Detalhes da rede	docker network inspect minha-rede

ğŸ§¼ LIMPEZA
AÃ§Ã£o	Comando
Remover containers parados	docker container prune
Remover imagens nÃ£o utilizadas	docker image prune
Limpar tudo (âš ï¸ cuidado!)	docker system prune

ğŸ§ª OUTROS ÃšTEIS
AÃ§Ã£o	Comando
Ver versÃ£o do Docker	docker --version
Ver info do Docker	docker info
Salvar imagem em arquivo	docker save nome > nome.tar
Carregar imagem de arquivo	docker load < nome.tar

ğŸ§± O QUE Ã‰ DOCKER COMPOSE (versÃ£o mais clara possÃ­vel)
ğŸ§  O que Ã© o Docker Compose?
Docker Compose Ã© uma ferramenta oficial da Docker.

ğŸ‘‰ Serve para definir e executar mÃºltiplos containers Docker de uma vez sÃ³, com um Ãºnico arquivo de configuraÃ§Ã£o.

Esse arquivo se chama: docker-compose.yml.

ğŸ“„ O que Ã© o docker-compose.yml?
ğŸ”¤ YML ou YAML?
YAML = "YAML Ainâ€™t Markup Language" â†’ Ã© um tipo de arquivo de texto usado para configuraÃ§Ãµes.

Muito usado em projetos modernos como:

Docker

Kubernetes

GitHub Actions

CI/CD pipelines

O Docker Compose usa o docker-compose.yml para descrever como os containers devem ser configurados e executados.

ğŸ¤“ Por que as linhas comeÃ§am com - em YAML?
O - em YAML indica que estamos lidando com uma lista de valores (array).

Exemplo:

yaml
Copy
Edit
cores:
  - azul
  - vermelho
  - verde
Equivale a:

json
Copy
Edit
{
  "cores": ["azul", "vermelho", "verde"]
}
Em docker-compose.yml vocÃª usa listas para:

yaml
Copy
Edit
ports:
  - "8000:8000"
âœ… EXPLICAÃ‡ÃƒO DO ARQUIVO docker-compose.yml
Exemplo completo:
yaml
Copy
Edit
version: '3.8'

services:
  web:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - .:/app
      - logs:/var/logs
    environment:
      - DEBUG=true
    networks:
      - app-network

  db:
    image: postgres:13
    volumes:
      - db-data:/var/lib/postgresql/data
    environment:
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=1234
    networks:
      - app-network

volumes:
  db-data:
  logs:

networks:
  app-network:
ğŸ§± Linha por linha explicada
version: '3.8'
Indica a versÃ£o da linguagem Docker Compose.

Use '3.8' para projetos modernos.

services:
Aqui vocÃª lista todos os containers que quer rodar.

Cada entrada Ã© um serviÃ§o = container.

web: (ou qualquer outro nome)
Nome do serviÃ§o (personalizÃ¡vel).

Pode ser web, api, backend, frontend, etc.

build: .
O Compose procura um Dockerfile na pasta atual . para construir a imagem.

image: nome:versÃ£o
Usa uma imagem pronta do Docker Hub.

Exemplo: postgres:13 ou redis:alpine.

ports:
yaml
Copy
Edit
ports:
  - "8000:8000"
Mapeia porta da mÃ¡quina host para o container.

Primeiro nÃºmero: mÃ¡quina local.

Segundo nÃºmero: dentro do container.

volumes: (dois tipos)
Bind Mount (local â†’ container)

yaml
Copy
Edit
volumes:
  - .:/app
Compartilha arquivos entre o host e o container.

Alterar algo localmente reflete no container.

Named Volume (persistÃªncia gerenciada pelo Docker)

yaml
Copy
Edit
volumes:
  - db-data:/var/lib/postgresql/data
Persiste dados entre reinicializaÃ§Ãµes.

O volume db-data Ã© gerenciado automaticamente.

environment:
yaml
Copy
Edit
environment:
  - VARIAVEL=valor
Define variÃ¡veis de ambiente dentro do container.

Exemplo: DEBUG=true, API_KEY=xyz.

networks: (por serviÃ§o)
yaml
Copy
Edit
networks:
  - app-network
Permite que containers se comuniquem entre si.

Os containers podem se referenciar pelo nome do serviÃ§o.

volumes: (no final do arquivo)
yaml
Copy
Edit
volumes:
  db-data:
  logs:
Define volumes nomeados globais usados nos serviÃ§os.

networks: (no final do arquivo)
yaml
Copy
Edit
networks:
  app-network:
Cria redes personalizadas entre os serviÃ§os.

ğŸ’» COMANDOS DO DOCKER COMPOSE (todos explicados)
â–¶ï¸ Subir os containers
docker-compose up
LÃª o arquivo docker-compose.yml.

ConstrÃ³i as imagens (se necessÃ¡rio).

Sobe todos os containers e mostra os logs no terminal.

docker-compose up --build
Igual ao up, mas forÃ§a reconstruÃ§Ã£o das imagens mesmo que jÃ¡ existam.

docker-compose up -d
Sobe os containers em segundo plano (detached mode).

ğŸ›‘ Parar e remover os containers
docker-compose down
Para e remove todos os containers.

Remove a rede e os volumes anÃ´nimos (mas nÃ£o os volumes nomeados).

docker-compose down -v
Remove tambÃ©m os volumes nomeados.

docker-compose stop
Apenas para os containers (nÃ£o remove).

docker-compose rm
Remove containers parados.

ğŸ”„ Outros comandos Ãºteis
docker-compose restart
Reinicia todos os containers.

docker-compose start
Inicia containers parados.

docker-compose exec [serviÃ§o] [comando]
Executa um comando em um container rodando.

Exemplo:

bash
Copy
Edit
docker-compose exec web bash
â†’ Abre terminal dentro do container web.

docker-compose run [serviÃ§o] [comando]
Executa um comando em um novo container.

docker-compose ps
Mostra os containers ativos.

docker-compose logs
Mostra os logs de todos os serviÃ§os.

bash
Copy
Edit
docker-compose logs -f
â†’ Segue os logs em tempo real.

ğŸŒ ComunicaÃ§Ã£o entre containers (network interna)
Dentro do docker-compose, os serviÃ§os podem se comunicar pelo nome.

Exemplo:

python
Copy
Edit
# Para o serviÃ§o web se conectar ao banco
host = "db"
port = 5432
ğŸ§ª Exemplo mÃ­nimo funcional com Flask + Redis
yaml
Copy
Edit
version: '3.8'

services:
  app:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - .:/app
    environment:
      - DEBUG=true
    networks:
      - app-network

  redis:
    image: redis:alpine
    networks:
      - app-network

networks:
  app-network:
ğŸ§¼ Usando arquivo .env
Crie um arquivo .env:

env
Copy
Edit
POSTGRES_USER=admin
POSTGRES_PASSWORD=1234
No Compose:

yaml
Copy
Edit
environment:
  - POSTGRES_USER=${POSTGRES_USER}
  - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
ğŸ”š RESUMO FINAL
Conceito	ExplicaÃ§Ã£o curta
services:	Cada serviÃ§o vira um container separado
build:	Cria imagem a partir do Dockerfile
image:	Usa imagem pronta do Docker Hub
ports:	Mapeia portas: host â†’ container
volumes:	Compartilha pastas ou cria persistÃªncia
environment:	Define variÃ¡veis de ambiente dentro do container
networks:	Permite que serviÃ§os se comuniquem entre si
.env	Arquivo externo com variÃ¡veis
- (hÃ­fen)	Representa listas em YAML
.yml	Arquivo de configuraÃ§Ã£o com indentaÃ§Ã£o obrigatÃ³ria


Um daemon (tambÃ©m chamado de "servidor") Ã© um programa que roda em segundo plano no
sistema operacional, executando tarefas automaticamente e sem interrupÃ§Ã£o. Eles sÃ£o
essenciais para manter o sistema funcionando, realizando tarefas como controlar
redes, gerenciar arquivos, ou executar serviÃ§os em segundo plano. 
Como funcionam os daemons:
    1. InÃ­cio:
    Os daemons sÃ£o geralmente iniciados durante o processo de inicializaÃ§Ã£o do
    sistema, atravÃ©s de scripts de inicializaÃ§Ã£o ou do processo init. 

  2. ExecuÃ§Ã£o:
  Uma vez iniciados, os daemons geralmente continuam a executar indefinidamente,
  aguardando eventos especÃ­ficos ou condiÃ§Ãµes para executar suas tarefas. 
  3. FunÃ§Ãµes:
  Os daemons desempenham diversas funÃ§Ãµes, como:

    Gerenciar redes: Tratando pedidos de conexÃ£o e encaminhando dados. 

Controlar serviÃ§os: Executando serviÃ§os em segundo plano, como servidores web,
servidores de banco de dados, etc. Monitorar eventos: Reagindo a eventos do
sistema, como alteraÃ§Ãµes em arquivos ou eventos de rede. Realizar tarefas
 agendadas: Executando tarefas em horÃ¡rios especÃ­ficos, como backups. 

4. DesassociaÃ§Ã£o:
Os daemons sÃ£o desassociados do terminal de controle, o que significa que eles
nÃ£o estÃ£o diretamente vinculados a uma janela de terminal ou sessÃ£o do usuÃ¡rio. 
5. Processo de fundo:
Eles sÃ£o executados como um processo de fundo, o que significa que eles nÃ£o 
bloqueiam a interaÃ§Ã£o do usuÃ¡rio. 
6. ManutenÃ§Ã£o do sistema:
Os daemons sÃ£o importantes para a manutenÃ§Ã£o do sistema, garantindo que as 
tarefas do sistema sejam executadas de forma eficiente e confiÃ¡vel. 

Exemplos de daemons:

    NTP Daemon: Sincroniza o relÃ³gio do sistema com outros computadores na rede.
    Servidor web: Processa requisiÃ§Ãµes HTTP e entrega pÃ¡ginas web.
    Servidor de banco de dados: Gerencia dados em um banco de dados.
    Cron Daemon: Executa tarefas agendadas. 

ImportÃ¢ncia dos daemons:
Os daemons sÃ£o essenciais para o funcionamento de um sistema operacional, pois
 eles executam tarefas que sÃ£o importantes para o desempenho do sistema, sem 
 interrupÃ§Ã£o da interaÃ§Ã£o do usuÃ¡rio. Eles sÃ£o a base de muitos serviÃ§os e
 aplicaÃ§Ãµes que usamos diariamente.


